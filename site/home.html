 <!doctype html>
<html>
    <head>
        <meta charset = "utf-8">
        <title>Space Adventure</title>
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,400,700,600' rel='stylesheet' type='text/css'>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <link href="./styles/gameStyle.css" rel="stylesheet">
        
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        
        <script>
            var planet = "planet1";
            var answers = "";
			var loc = "_1_";
            var showingStats = false;
			var cardinal = ["north", "east", "west", "south", "a", "b", "c", "d"];
            
            $(window).on("load",function(){
			
				window.addEventListener("message", miniGameResult, false);
                loadscript();
				//update(loc);
            });

            <!-- When the new planet is needed, edit planet and run loadscript() -->
            function loadscript(){
                var src = "./prompts/" + planet + ".js" + "?" + Math.random();  
                var head= document.getElementsByTagName('head')[0];
                var script= document.createElement('script');
                script.type= 'text/javascript';
                script.src= src;
                head.appendChild(script);  

				$(script).on("load",function(){
					update(loc);
					
					// Old style that I updated
					//Button Click functionality
					$("button").on("click",function(){
						console.log(loc);
						var id = this.id;
						var dir_go = id + "_go";
						if (levels[loc][dir_go]){
							newLoc = levels[loc][dir_go];
							update(newLoc);
						}
					});
                });
            }
			
			function update(newLoc) {
				loc = newLoc;
				
				//Toggle Directional keys as needed.
				for (dir in cardinal) {
						var dir_go = cardinal[dir] + "_go";
						if (!(levels[loc][dir_go])) {
							$("#" + cardinal[dir]).hide();
						} else {
							$("#" + cardinal[dir]).show();
						}
					}
					
				//If the location runs a game, find the file and append the game screen
				if (levels[loc].game) {
					var miniGame = document.createElement("iframe");
					miniGame.id = "miniGame";
					$(miniGame).attr('src', levels[loc].game);
					document.getElementById("layoutLeft").appendChild(miniGame);
					$("#textGame").hide();
				} 
				
				else if (levels[loc].planet) {
					planet = levels[loc].planet;
					loc = "_1_";
					loadscript();
				}
				
				else if (levels[loc].condition) {
					var condition = levels[loc].condition;
					var pass = levels[loc].pass;
					switch (condition) {
						case "map":
							if (inventory["map"]){
								newLoc = loc + "_accept";
								update(newLoc);
							}
							
							else {
								newLoc = loc + "_deny";
								update(newLoc);
							}
							break;	
					}
				}
				//Otherwise, update the prompt and options.
				else {
					$("#displayprompt").html(levels[newLoc].prompt);
					$("#a").html(levels[newLoc].a); 
					$("#b").html(levels[newLoc].b);
				}
			}
						
             <!-- function to toggle between the stats and inventory menu when the toggle button is clicked -->
            function toggle() {
                var invDiv = document.getElementById("sidebarMenu");
                var statDiv = document.getElementById("statMenu");
                var toggleText = document.getElementById("invStatToggle");
				$(invDiv).toggle();
				$(statDiv).toggle();
                if(showingStats) {
                    showingStats = false;
                    toggleText.innerHTML = "Show Stats";
                }
                else {
                    showingStats = true;
                    toggleText.innerHTML = "Show Inventory";
                }
            }
			
			function miniGameResult(e) {			
				console.log(e.data);
				$("#miniGame").remove();
				$("#textGame").show();
				if (e.data.success) {
					levels[loc].reward();
					update(levels[loc].success);
				}
				else {
					update(levels[loc].fail);
				}
				
			}
            
        </script>
    </head>
    <body>
        <main> 
			<div id="layoutLeft">
				<div id="textGame">
					<div id="textOutput" class="layoutArea">
						<div id="prompt">
							<p id="displayprompt">Welcome</p>
						</div>
					</div>
					
					<div id="actionButtons" class="layoutArea">
						<button class="btn" id="a">Begin</button>
						<button class="btn" id="b">Quit</button>
						<button class="btn" id="c"></button>
						<button class="btn" id="d"></button>
					</div>
				</div>
			</div>
			<div id="layoutRight">
				<div id="invStatToggle" class="layoutArea" onclick = "toggle()">
					Show Stats
				</div>
				<div id="statMenu" class ="layoutArea sidebar">
					<script id = "statScript" type = "text/javascript" src = "prompts/stats.js"></script>
				</div>
				<div id="sidebarMenu" class="layoutArea sidebar">
					<script id = "invScript" type="text/javascript" src="prompts/inventory.js"></script>
				</div>
				<div id="movementButtons" class="layoutArea">
					<p>
						<button class="mvbtn" id="north">North</button>
						<button class="mvbtn" id="east">East</button>
					</p><p>
						<button class="mvbtn" id="west">West</button>
						<button class="mvbtn" id="south">South</button>
					</p>
				</div>
			</div> 
		</main>
    </body>
</html>