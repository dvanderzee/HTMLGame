 <!doctype html>
<html>
    <head>
        <meta charset = "utf-8">
        <title>Space Adventure</title>
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,400,700,600' rel='stylesheet' type='text/css'>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <link href="./styles/gameStyle.css" rel="stylesheet">
        
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        
        <script>
            var planet = "planet1";
            var answers = "";
            var depth = 1;
			var loc = "_1_a";
            var showingStats = false;
			var cardinal = ["north", "east", "west", "south", "a", "b", "c", "d"];
            
            $(window).on("load",function(){
			
				window.addEventListener("message", miniGameResult, false);
                loadscript();
				//update2(loc);
				
                /* Devon's Stuff
				$("#op-a").on("click",function(){
					<!-- Check if the player has changed locations, and edit coordinates -->
					switch (document.getElementById("op-a").innerHTML){
						<!-- If the player travels North -->
						case "North":
							levels.coord[0] ++;
							break
						<!-- If the player travels South -->
						case "South":
							levels.coord[0] --;
							break
						case "Exit":
							game = false;
							break
					}
					update();
                });

                $("#op-b").on("click",function(){
					switch (document.getElementById("op-b").innerHTML){
						<!-- If the player travels North -->
						case "North":
							levels.coord[0] ++;
							break
							
						<!-- If the player travels South -->
						case "South":
							levels.coord[0] --;
							break
						
						<!-- If the player activates a computer to hack. -->
						case "Computer":
							gameList.hacking = true;
							game = true;
							console.log(game, gameList.hacking, "game value when computer is pressed")
							break
					}
                    update();
                });
				
				
				// Old style that I updated
				$("#op-a").on("click",function(){
						newLoc = levels[loc].a_go;
						update2(newLoc);
                });

                $("#op-b").on("click",function(){
						newLoc = levels[loc].b_go;
						update2(newLoc);
				});
				*/
            });

            <!-- When the new planet is needed, edit planet and run loadscript() -->
  
            function loadscript(){
                var src = "./prompts/" + planet + ".js" + "?" + Math.random();  
                var head= document.getElementsByTagName('head')[0];
                var script= document.createElement('script');
                script.type= 'text/javascript';
                script.src= src;
                head.appendChild(script);  

				$(script).on("load",function(){
					update2(loc);
					
					// Old style that I updated
					//Button Click functionality
					$("button").on("click",function(){
						console.log(loc);
						var id = this.id;
						var dir_go = id + "_go";
						if (levels[loc][dir_go]){
							newLoc = levels[loc][dir_go];
							update2(newLoc);
						}
					});
					/*$("#north").on("click",function(){
						if (levels[loc].north_go){
						newLoc = levels[loc].north_go;
						update2(newLoc);
						}
					});

					$("#east").on("click",function(){
						if (levels[loc].east_go){
						newLoc = levels[loc].east_go;
						update2(newLoc);
						}
					});
					$("#west").on("click",function(){
						if (levels[loc].west_go){
						newLoc = levels[loc].west_go;
						update2(newLoc);
						}
					});

					$("#south").on("click",function(){
						if (levels[loc].south_go){
						newLoc = levels[loc].south_go;
						update2(newLoc);
						}
					});
					$("#op-a").on("click",function(){
						if (levels[loc].a_go){
						newLoc = levels[loc].a_go;
						update2(newLoc);
						}
					});

					$("#op-b").on("click",function(){
						if (levels[loc].b_go){
						newLoc = levels[loc].b_go;
						update2(newLoc);
						}
					});*/
                });
            }
			
			function update2(newLoc) {
				loc = newLoc;
				
				//Toggle Directional keys as needed.
				for (dir in cardinal) {
						var dir_go = cardinal[dir] + "_go";
						if (!(levels[loc][dir_go])) {
							console.log("turn", cardinal[dir], "off");
							$("#" + cardinal[dir]).hide();
						} else {
							console.log("turn", cardinal[dir], "on");
							$("#" + cardinal[dir]).show();
						}
					}
					
				//If the location runs a game, find the file and append the game screen
				if (levels[loc].game) {
					var miniGame = document.createElement("iframe");
					miniGame.id = "miniGame";
					$(miniGame).attr('src', levels[loc].game);
					document.getElementById("layoutLeft").appendChild(miniGame);
					$("#textGame").hide();
				}
				
				//Otherwise, update the prompt and options.
				else {
					$("#displayprompt").html(levels[newLoc].prompt);
					$("#a").html(levels[newLoc].a); 
					$("#b").html(levels[newLoc].b);
				}
			}
			
			/* Devon's update function
			function update(){
					
					<!-- If a game is exited, set the game specific boolean to false -->
					if (game == false) {
						gameList.hacking = false;
						gameList.puzzle = false;
						$("#miniGame").remove();
					}					
					
					<!-- Run the Dialogue function -->
					levels.dialogue();
					
					<!-- Change display to the current prompt -->
                    $("#displayprompt").html(levels.prompt);
					
					<!-- Change options to the current options -->
                    $("#op-a").html(levels.a); 
                    $("#op-b").html(levels.b);
					
					<!-- Will be used to add items, start Games and change Planets-->
                    if (levels.item){
                        alert("You Found An Item");
                    }
					
                    if (game){
						<!-- Determine the game to be run, and set the src -->
						var gameSrc;
						for (var prop in gameList){
							if(gameList[prop]) {
								gameSrc = "../Minigames/" + prop;
							}
						}
						
						var miniGame = document.createElement("iframe");
						miniGame.id = "miniGame";
						$(miniGame).attr('src', gameSrc);
						document.getElementById("layoutLeft").appendChild(miniGame);
						$("#textoutput").hide();
                    }
					
                    if (levels.newplanet){
                        alert("New Planet");
                    }
                
			}
			*/
						
             <!-- function to toggle between the stats and inventory menu when the toggle button is clicked -->
            function toggle() {
                var invDiv = document.getElementById("sidebarMenu");
                var statDiv = document.getElementById("statMenu");
                var toggleText = document.getElementById("invStatToggle");
				$(invDiv).toggle();
				$(statDiv).toggle();
                if(showingStats) {
                    showingStats = false;
                    toggleText.innerHTML = "Show Stats";
                }
                else {
                    showingStats = true;
                    toggleText.innerHTML = "Show Inventory";
                }
            }
			
			function miniGameResult(e) {			
				console.log(e.data);
				$("#miniGame").hide();
				$("#textGame").show();
				update2(levels[loc].success);
			}
            
        </script>
    </head>
    <body>
        <main> 
			<div id="layoutLeft">
				<div id="textGame">
					<div id="textOutput" class="layoutArea">
						<div id="prompt">
							<p id="displayprompt">Welcome</p>
						</div>
					</div>
					
					<div id="actionButtons" class="layoutArea">
						<button class="btn" id="a">Begin</button>
						<button class="btn" id="b">Quit</button>
						<button class="btn" id="c"></button>
						<button class="btn" id="d"></button>
					</div>
				</div>
			</div>
			<div id="layoutRight">
				<div id="invStatToggle" class="layoutArea" onclick = "toggle()">
					Show Stats
				</div>
				<div id="statMenu" class ="layoutArea sidebar">
					<script id = "statScript" type = "text/javascript" src = "prompts/stats.js"></script>
				</div>
				<div id="sidebarMenu" class="layoutArea sidebar">
					<script id = "invScript" type="text/javascript" src="prompts/inventory.js"></script>
				</div>
				<div id="movementButtons" class="layoutArea sidebar">
					<p>
						<button class="mvbtn" id="north">North</button>
						<button class="mvbtn" id="east">East</button>
					</p><p>
						<button class="mvbtn" id="west">West</button>
						<button class="mvbtn" id="south">South</button>
					</p>
				</div>
			</div> 
		</main>
    </body>
</html>